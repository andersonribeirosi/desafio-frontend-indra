<div class="container">
  <div>
    <button
      id="btn-user"
      type="button"
      class="btn btn-info btn-sm"
      (click)="goToUsers()"
    >
      Voltar
    </button>
    <button
      type="button"
      class="btn btn-success btn-sm ml-1"
      (click)="reloadPage()"
    >
      Atualizar Página
    </button>
  </div>
  <div class="card list-user">
    <h5 class="card-header"><strong>Lista de Usuários</strong></h5>
    <div class="card-body">
      <table class="table table-striped">
        <thead>
          <tr>
            <th scope="col">Id</th>
            <th scope="col">Nome</th>
            <th scope="col">email</th>
            <th scope="col">Login - Acesso</th>
            <th scope="col">Privilégios</th>
            <th scope="col">Ações</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let user of users">
            <td>{{ user.id }}</td>
            <td>{{ user.nome }}</td>
            <td>{{ user.email }}</td>
            <td>{{ user.login }}</td>
            <td>{{ user.admin }}</td>
            <td>
              <button
                type="button"
                class="btn btn-warning btn-sm"
                (click)="editUser(user)"
              >
                Editar
              </button>
              <button
                type="button"
                class="btn btn-danger btn-sm ml-1"
                (click)="deleteUser(user)"
              >
                Deletar
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <div class="card add-user">
    <h5 class="card-header">
      <strong>Adicionar / Atualizar usuário</strong>
    </h5>
    <div class="card-body">
      <form
        id="add-form"
        (ngSubmit)="f.form.valid && saveUser(f)"
        #f="ngForm"
        novalidate
      >
        <div class="form-group">
          <label for="nome">Nome</label>
          <input
            type="string"
            [(ngModel)]="user.nome"
            id="nome"
            name="nome"
            #nome="ngModel"
            required
            class="form-control"
            [ngClass]="{ 'is-invalid': f.submitted && nome.invalid }"
            placeholder="Informe o nome do usuário"
          />
          <!-- Validação do campo data 
          A diretiva estrutural *ngIf verifica se o campo está preenchido ou inválido
          -->
          <div *ngIf="f.submitted && nome.invalid" class="invalid-feedback">
            <div *ngIf="nome.errors.required">O nome é obrigatório</div>
          </div>
        </div>
        <div class="form-group">
          <label for="email">Email</label>
          <input
            type="email"
            [(ngModel)]="user.email"
            id="email"
            name="email"
            #email="ngModel"
            required
            class="form-control"
            [ngClass]="{ 'is-invalid': f.submitted && email.invalid }"
            placeholder="Informe o email"
          />
          <!-- Validação do campo email 
          A diretiva estrutural *ngIf verifica se o campo está preenchido ou inválido
          -->
          <div *ngIf="f.submitted && email.invalid" class="invalid-feedback">
            <div *ngIf="email.errors.required">
              Email é obrigatório
            </div>
          </div>
        </div>

        <button type="submit" class="btn btn-primary btn-add-user">
          Salvar
        </button>
        <button
          type="reset"
          class="btn btn-secondary btn-add-user"
          (click)="cleanForm(f)"
        >
          Limpar campos
        </button>
      </form>
    </div>
  </div>
</div>
